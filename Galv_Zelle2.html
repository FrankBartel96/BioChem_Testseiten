<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <!--  <meta name="viewport" content="width=device-width, initial-scale=1.0">  -->
    <!-- /*Zoom*/-->
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, minimum-scale=0.5, maximum-scale=3.0, user-scalable=yes">
    <title>Galvanische Zelle</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background-color: #F6F8E2;
            margin: 0;
            padding: 1rem;
            color: #1c1c1e;
        }


        .container {
            width: 900px;
            max-height: 1200px;
            /* max-width: 900px; */
            background-color: #F6F8E9;
            /*  padding: 20px;*/
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            text-align: center;
        }


        h1 {
            text-align: left;
        }



        h2 {
            text-align: left;
            color: red;
        }



        h3 {
            text-align: left;
        }


        .cell-container {
            /*   */ display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            /**/ gap: 1rem;
            /*  margin-top:1rem; */
        }

        .skizze {
            max-width: 70%;
            margin-bottom: 1rem;
            border-radius: 16px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }


        /*Hintergrundfarbe um Anode/Katode*/
        /*display: flex; nebeneinander*/

        /*
        .electrode-area {

            display: flex;
            justify-content: space-around;
            width: 90%;
            background-color: #6fa6e1;

        }


        */

        .half-cell {
            /*  position: page;  */
            position: relative;
            /*  display: flex;*/


            border: 2px dashed #ccc;
            border-radius: 12px;
            width: 100px; /*40%*/
            height: 40px; /*200px*/
            text-align: center;
            padding: 1rem;
            background-color: #93beed; /*Hintergrundfarbe Katode*/
        }


        .drag-item { /*GRaue FElder Metalle*/
            padding: 0.5rem 1rem;
            background-color: #dcdcdc;
            border-radius: 8px;
            margin: 0.5rem;
            display: inline-block;
            cursor: grab;
        }


            .drag-item:hover {
                background-color: #f5f5f7;
                box-shadow: 0 6px 18px rgba(0, 0, 0, 0.1);
            }


        .input-section { /*Feld um Metalle*/
            text-align: center;
            margin-top: 1rem;
        }



        button {
            padding: 0.75rem 1.5rem;
            background-color: #007aff;
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            cursor: pointer;
        }

            button:hover {
                background-color: #005ecb;
            }

        .feedback {
            margin-top: 1rem;
            font-weight: bold;
        }


        .anodee {
            /*  position: page;  */
            position: relative;
            /*  display: flex;*/
            border: 2px dashed #ccc;
            border-radius: 12px;
            width: 100px; /*40%*/
            height: 40px; /*200px*/
            text-align: center;
            padding: 1rem;
            background-color: #c3ed93; /*Hintergrundfarbe Katode*/
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Simulation einer Galvanischen Zelle</h1>

        Geltungsbereich für Standardpotenziale: Normbedungungen 25°C; 101 kPa; Aktivität C=1mol/l
        <h3>1. Finden Sie sinnvolle, funtionierende Kombinationen der Halbelemente.</h3>
        <h3>2. Notieren Sie die Teilgleichungen an Kathode und Anode sowie das vollständige Redoxsystem.</h3>
        <h3>3. Berechnen Sie Potentialdifferenz aus den Standardpotenzialen und überprüfen Sie die Zellspannung. </h3>


        <!-- Eingebettete Skizze -->


        <div class="input-section">
            <h2>Wähle Metalle und Ionen:</h2>
            <div id="items"></div>
            <button onclick="calculateCellVoltage()">Kombination checken und Zellspannung berechnen</button>
            <div id="result" class="feedback"></div>
        </div>
        <img src="./Pics/zellskizze2.png" alt="Skizze Galvanische Zelle" class="skizze">

        <!--  <div class="electrode-area"> rahmen um Katode Anode  -->
        <div id="anode" style="top:  -200px; left: 320px;" class="anodee" ondrop="drop(event, 'anode')" ondragover="allowDrop(event)">

            <!--  id="anode" class="half-cell"  -->

            <strong>Anode</strong><br>
            <div id="anode-content"></div>

        </div>
        <div id="cathode" style="top:  -275px; left:512px;" class="half-cell" ondrop="drop(event, 'cathode')" ondragover="allowDrop(event)">
            <strong>Kathode</strong><br>
            <div id="cathode-content"></div>

        </div>
        <!-- </div>class electrode area -->


        <button onclick="location.reload()">Seite neu laden</button>
        <button onclick="openQRCode()">QR-Code anzeigen</button>
    </div> <!-- Container-->

    <script>
        const materials = [
            { name: 'Zn / Zn<sup>2+</sup>', potential: -0.76 },
            { name: 'Cu / Cu<sup>2+</sup>', potential: 0.34 },
            { name: 'Ag / Ag<sup>+</sup>', potential: 0.80 },
            { name: 'Fe / Fe<sup>2+</sup>', potential: -0.44 },
            { name: 'Pb / Pb<sup>2+</sup>', potential: -0.13 },
            { name: 'Ni / Ni<sup>2+</sup>', potential: -0.23 },
            { name: 'Mg / Mg<sup>2+</sup>', potential: -2.37 },
            { name: 'Al / Al<sup>3+</sup>', potential: -1.66 },
            { name: 'Sn / Sn<sup>2+</sup>', potential: -0.14 },
            { name: 'Cr / Cr<sup>3+</sup>', potential: -0.74 },
            { name: 'Co / Co<sup>2+</sup>', potential: -0.28 },
            { name: 'Mn / Mn<sup>2+</sup>', potential: -1.18 }
        ];

        materials.forEach(mat => {
            const item = document.createElement('div');
            item.className = 'drag-item';
            item.draggable = true;
            item.innerHTML = mat.name;
            item.dataset.potential = mat.potential;
            item.addEventListener('dragstart', e => {
                e.dataTransfer.setData('text/plain', JSON.stringify({
                    name: mat.name,
                    potential: mat.potential
                }));
            });
            document.getElementById('items').appendChild(item);
        });

        function allowDrop(e) {
            e.preventDefault();
        }

        let anode = null;
        let cathode = null;

        function drop(e, type) {
            e.preventDefault();
            const data = JSON.parse(e.dataTransfer.getData('text/plain'));
            document.getElementById(type + '-content').innerHTML = data.name;
            if (type === 'anode') anode = data;
            if (type === 'cathode') cathode = data;
        }

        function calculateCellVoltage() {
            const result = document.getElementById('result');
            if (!anode || !cathode) {
                result.style.color = 'red';
                result.innerText = 'Bitte wähle eine Anode und eine Kathode.';
                return;
            }

            const voltage = cathode.potential - anode.potential;
            if (voltage > 0) {
                result.style.color = 'green';
                result.innerHTML = `Richtige Kombination. Zellspannung: <strong>${voltage.toFixed(2)}V= ${cathode.potential}V-(${anode.potential}V)</strong>`;
            } else {
                result.style.color = 'red';
                result.innerHTML = `Falsche Kombination. Zellspannung negativ: <strong>${voltage.toFixed(2)} V</strong>`;
            }
        }
    </script>




    <script>
        function openQRCode() {
            const currentUrl = window.location.href;
            const qrWin = window.open("", "_blank", "width=520,height=600,resizable=yes,scrollbars=no");

            qrWin.document.write(`
               <html lang="de">
               <head>
                 <meta charset="UTF-8">
                 <title>QR-Code</title>
                 <style>
                   body {
                     font-family: Arial, sans-serif;
                     text-align: center;
                     background: #fff;
                     padding: 30px;
                   }
                   #qrcode { margin-top: 40px; }
                   button {
                     margin-top: 40px;
                     background: #0071e3;
                     color: #fff;
                     border: none;
                     border-radius: 10px;
                     font-size: 16px;
                     padding: 10px 20px;
                     cursor: pointer;
                   }
                   button:hover { background: #005bb5; }
                 </style>
               </head>
               <body>
                 <h2>QR-Code zu dieser Seite</h2>
                 <div id="qrcode"></div>
                 <button onclick="window.close()">Fenster schließen</button>
                 <script src="libs/qrcode.min.js"><\/script>
                 <script>
                   window.addEventListener('load', function() {
                     new QRCode(document.getElementById("qrcode"), {
                       text: "${currentUrl}",
                       width: 220,
                       height: 220,
                       correctLevel: QRCode.CorrectLevel.H
                     });
                   });
                 <\/script>
               </body>
               </html>
             `);

            qrWin.document.close();
        }
    </script>

</body>
</html>

