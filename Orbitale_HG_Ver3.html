<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <!--  <meta name="viewport" content="width=device-width, initial-scale=1.0">  -->
    <!-- /*Zoom*/-->
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, minimum-scale=0.5, maximum-scale=3.0, user-scalable=yes">



    <title>Orbitale HG mit Drag-and-Drop</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #F6F8E2;
            color: #1d1d1f;
            text-align: left;
            padding-top: 50px;
        }

        h2, h3 {
            font-weight: 400;
            text-align: center;
        }



        table {
            border-collapse: collapse;
            width: 80%;
        }

        th, td {
            border: 0px solid #999;
            padding: 2px;
            margin: 2px;
            text-align: center;
        }

        /* Abwechselnde Hintergrundfarben */
        tr:nth-child(odd) {
            background-color: #F0A88D; /* leichtes Rosa */
        }

        tr:nth-child(even) {
            background-color: #EEE8AA; /* helles Gelb */
        }

        /* Optional: Hover-Effekt für bessere Lesbarkeit */
        /* tr:hover {
                    background-color: #B0e4DE;  sanftes Grün beim Überfahren
                }
        */
        /* Optional: Überschriften farblich hervorheben */
        th {
            background-color: #B0C4DE; /* hellblau */
            color: #000;
        }


        .luecke {
            width: 150px;
            min-height: 25px;
            display: inline-flex;
            justify-content: center;
            align-items: center;
            border: 2px dashed #999;
            border-radius: 10px;
            margin: 2px;
            background-color: #fff;
            transition: background-color 0.3s ease;
        }


            .luecke:hover {
                background-color: #d2d2d7;
                box-shadow: 0 6px 18px rgba(0, 0, 0, 0.1);
            }

        .richtig {
            background-color: #b6fcb6 !important; /* Grün */
            border-color: #4caf50;
        }

        .falsch {
            background-color: #f7b6b6 !important; /* Rot */
            border-color: #e53935;
        }


        .luecke1s {
            width: 40px;
            min-height: 25px;
            display: inline-flex;
            justify-content: center;
            align-items: center;
            border: 2px dashed #999;
            border-radius: 10px;
            margin: 4px;
            background-color: #fff;
            transition: background-color 0.3s ease;
        }


            .luecke1s:hover {
                background-color: #d2d2d7;
                box-shadow: 0 6px 18px rgba(0, 0, 0, 0.1);
            }

        .richtig {
            background-color: #b6fcb6 !important;
            border-color: #4caf50;
        }

        .falsch {
            background-color: #f7b6b6 !important;
            border-color: #e53935;
        }



        .wortspeicher2 {
            margin-top: 5px;
            font-size: 12px;
        }


        .wort {
            width: 26px;
            padding: 7px;
            margin: 7px;
            border: 1px solid #d2d2d7;
            border-radius: 10px;
            background-color: #e1e1e3;
            display: inline-block;
            cursor: pointer;
            font-weight: 200;
            transition: background-color 0.3s ease, box-shadow 0.3s ease;
        }


        .wort2 {
            width: 130px;
            padding: 5px;
            margin: 5px;
            border: 1px solid #d2d2d7;
            border-radius: 10px;
            background-color: #e1e1e3;
            display: inline-block;
            cursor: pointer;
            font-weight: 200;
            transition: background-color 0.3s ease, box-shadow 0.3s ease;
        }


            .wort2:hover {
                background-color: #f5f5f7;
                box-shadow: 0 6px 18px rgba(0, 0, 0, 0.1);
            }

        .wortp {
            width: 110px;
            padding: 6px;
            margin: 7px;
            border: 1px solid #d2d2d7;
            border-radius: 10px;
            background-color: #e1e1e3;
            display: inline-block;
            cursor: pointer;
            font-weight: 200;
            transition: background-color 0.3s ease, box-shadow 0.3s ease;
        }


            .wortp:hover {
                background-color: #f5f5f7;
                box-shadow: 0 6px 18px rgba(0, 0, 0, 0.1);
            }




        .wort:hover {
            background-color: #f5f5f7;
            box-shadow: 0 6px 18px rgba(0, 0, 0, 0.1);
        }






        button {
            padding: 12px 24px;
            margin-top: 20px;
            border: none;
            border-radius: 12px;
            background-color: #0071e3;
            color: white;
            font-size: 12px;
            cursor: pointer;
            transition: background-color 0.3s ease, box-shadow 0.3s ease;
        }

            button:hover {
                background-color: #005bb5;
                box-shadow: 0 6px 18px rgba(0, 0, 0, 0.1);
            }
    </style>
</head>
<body>
    <!--

    <div class="container">-->
    <h2 style="color:#731768">&nbsp;Orbitalbesetzungen Hauptgruppenelemente </h2>
    <h3 style="color:red" font-family:'Courier New'">  Vervollständigen Sie die Orbitalbesetzung folgender Elemente und Ionen.</h3>
    <h3 style="color:red" font-family:'Courier New'">   Beachten Sie die Hückel-Regel und das Paui-Verbot.</h3>

    <div>
        <table align="center" border="0" cellpadding="0" cellspacing="0">
            <tr align="center">

                <td colspan="2"> <h3>  Hochzahlenschreibweise  </h3>  </td>
                <td><h2>  1s     </h2>              </td>
                <td><h2>  2s     </h2>              </td>
                <td> <h2> 2p     </h2>              </td>
                <td> <h2>3s      </h2>              </td>
                <td> <h2>3p      </h2>              </td>

                <td> <h3>  Orbitale   </h3>                     </td>
                <td> <h3>  Hochzahlen </h3>                     </td>
            </tr>
            <tr>
                <td align="center">  Be   </td>
                <td align="center">
                    <span id="lueckeBe" class="luecke" ondrop="drop(event)" ondragover="allowDrop(event)">Hochzahl Be</span>
                </td>

                <td align="center">  <span class="luecke1s" id="lueckeBe1s2" ondrop="drop(event)" ondragover="allowDrop(event)"> </span>      </td>
                <td align="center">  <span class="luecke1s" id="lueckeBe2s2" ondrop="drop(event)" ondragover="allowDrop(event)"></span>    </td>
                <td align="center">  <span class="luecke" id="lueckeBe2p" ondrop="drop(event)" ondragover="allowDrop(event)"></span>    </td>
                <td align="center">  <span class="luecke1s" id="lueckeBe3s" ondrop="drop(event)" ondragover="allowDrop(event)"> </span>    </td>
                <td align="center">  <span class="luecke" id="lueckeBe3p" ondrop="drop(event)" ondragover="allowDrop(event)"></span>    </td>

                <td width="20%" rowspan="15">
                    <div class="wortspeicher2">
                        <!--Orbitale -->
                        <div class="wort2" id="wortleer" draggable="true" ondragstart="drag(event)"> nicht besetzt</div>
                        <div class="wort2" id="wortx" draggable="true" ondragstart="drag(event)"> Fehler</div>
                        <p>
                            1s, 2s und 3s
                            <div class="wort" id="wort1s1" draggable="true" ondragstart="drag(event)"> &uarr;</div>
                            <div class="wort" id="wort1s2" draggable="true" ondragstart="drag(event)"> &uarr;&darr;</div>

                            <!-- falsche Orbitale  -->
                            <div class="wort" id="wortx" draggable="true" ondragstart="drag(event)"> &uarr;&uarr;</div>
                            <div class="wort" id="wortx" draggable="true" ondragstart="drag(event)"> &darr;&darr;</div>
                        </p>

                        <p>2p und 3p </p>

                        <div class="wortp" id="wort2p1" draggable="true" ondragstart="drag(event)"> &uarr; </div>
                        <div class="wortp" id="wort2p2" draggable="true" ondragstart="drag(event)"> &uarr; &uarr;</div>
                        <div class="wortp" id="wort2p3" draggable="true" ondragstart="drag(event)"> &uarr; &uarr; &uarr; </div>
                        <div class="wortp" id="wort2p4" draggable="true" ondragstart="drag(event)"> &uarr;&darr; &uarr; &uarr;</div>
                        <div class="wortp" id="wort2p5" draggable="true" ondragstart="drag(event)"> &uarr;&darr; &uarr;&darr; &uarr;</div>
                        <div class="wortp" id="wort2p6" draggable="true" ondragstart="drag(event)"> &uarr;&darr; &uarr;&darr; &uarr;&darr;</div>


                        <!-- falsche Orbitale     -->
                        <div class="wortp" id="wortx" draggable="true" ondragstart="drag(event)"> &uarr; &darr;</div>
                        <div class="wortp" id="wortx" draggable="true" ondragstart="drag(event)"> &uarr; &darr;&uarr;</div>
                        <div class="wortp" id="wortx" draggable="true" ondragstart="drag(event)"> &uarr; &uarr; &uarr; &uarr;</div>



                    </div>
                </td>

                <td width="10%" rowspan="15">
                    <div class="wortspeicher2">

                        <!-- Hochzahlen  http://www.millin.de/downloads/3-935922-52-3/src/sonderzeichhtml.htm  &#178;(hoch) oder &#179; wie Quadrat oder kubik  -->

                        <div id="wortBe" class="wort2" draggable="true" ondragstart="drag(event)">1s&#178; 2s&#178;</div>
                        <div id="wortB" class="wort2" draggable="true" ondragstart="drag(event)">1s&#178; 2s&#178; 2p<sup>1</sup>  </div>
                        <div id="wortC" class="wort2" draggable="true" ondragstart="drag(event)">1s&#178; 2s&#178; 2p&#178;        </div>
                        <div id="wortN" class="wort2" draggable="true" ondragstart="drag(event)">1s&#178; 2s&#178; 2p<sup>3</sup>  </div>
                        <div id="wortO" class="wort2" draggable="true" ondragstart="drag(event)">1s&#178; 2s&#178; 2p<sup>4</sup>  </div>
                        <div id="wortF" class="wort2" draggable="true" ondragstart="drag(event)">1s&#178; 2s&#178; 2p<sup>5</sup>  </div>
                        <div id="wortNe" class="wort2" draggable="true" ondragstart="drag(event)">1s&#178; 2s&#178; 2p<sup>6</sup> </div>

                        <div id="wortNa" class="wort2" draggable="true" ondragstart="drag(event)">1s&#178;2s&#178; 2p<sup>6</sup>3s<sup>1</sup></div>

                        <div id="wortMg" class="wort2" draggable="true" ondragstart="drag(event)">1s&#178; 2s&#178; 2p<sup>6</sup>3s&#178;</div>
                        <div id="wortP" class="wort2" draggable="true" ondragstart="drag(event)">1s&#178; 2s&#178; 2p<sup>6</sup>3s&#178; 3p<sup>3</sup>  </div>
                        <div id="wortS" class="wort2" draggable="true" ondragstart="drag(event)">1&#178; 2s&#178; 2p<sup>6</sup>3s&#178; 3p<sup>4</sup> </div>
                        <div id="wortCl" class="wort2" draggable="true" ondragstart="drag(event)">1&#178; 2s&#178; 2p<sup>6</sup>3s&#178; 3p<sup>5</sup></div>
                        <div id="wortAr" class="wort2" draggable="true" ondragstart="drag(event)">1&#178; 2s&#178; 2p<sup>6</sup>3s&#178; 3p<sup>6</sup></div>

                    </div>
                </td>

            </tr>

            <tr>
                <td align="center">  B </td>
                <td align="center">  <span class="luecke" id="lueckeB" ondrop="drop(event)" ondragover="allowDrop(event)"> Hochzahl B</span></td>
                <td align="center">  <span class="luecke1s" id="lueckeB1s2" ondrop="drop(event)" ondragover="allowDrop(event)"> </span>      </td>
                <td align="center">  <span class="luecke1s" id="lueckeB2s2" ondrop="drop(event)" ondragover="allowDrop(event)"> </span>    </td>
                <td align="center">  <span class="luecke" id="lueckeB2p" ondrop="drop(event)" ondragover="allowDrop(event)">    </span>   </td>
                <td align="center">  <span class="luecke1s" id="lueckeB3s" ondrop="drop(event)" ondragover="allowDrop(event)">  </span>    </td>
                <td align="center">  <span class="luecke" id="lueckeB3p" ondrop="drop(event)" ondragover="allowDrop(event)">    </span>    </td>

            </tr>

            <tr>
                <td align="center">   C  </td>
                <td align="center">  <span class="luecke" id="lueckeC" ondrop="drop(event)" ondragover="allowDrop(event)"> Hochzahl C</span>    </td>
                <td align="center">  <span class="luecke1s" id="lueckeC1s2" ondrop="drop(event)" ondragover="allowDrop(event)"></span>      </td>
                <td align="center">  <span class="luecke1s" id="lueckeC2s2" ondrop="drop(event)" ondragover="allowDrop(event)"></span>    </td>
                <td align="center">  <span class="luecke" id="lueckeC2p" ondrop="drop(event)" ondragover="allowDrop(event)"></span>    </td>
                <td align="center">  <span class="luecke1s" id="lueckeC3s" ondrop="drop(event)" ondragover="allowDrop(event)"> </span>    </td>
                <td align="center">  <span class="luecke" id="lueckeC3p" ondrop="drop(event)" ondragover="allowDrop(event)"></span>    </td>
                p
            </tr>

            <tr>

                <td align="center"> N   </td>
                <td align="center">  <span class="luecke" id="lueckeN" ondrop="drop(event)" ondragover="allowDrop(event)">Hochzahl N</span>    </td>
                <td align="center">  <span class="luecke1s" id="lueckeN1s2" ondrop="drop(event)" ondragover="allowDrop(event)"> </span>      </td>
                <td align="center">  <span class="luecke1s" id="lueckeN2s2" ondrop="drop(event)" ondragover="allowDrop(event)"></span>    </td>
                <td align="center">  <span class="luecke" id="lueckeN2p" ondrop="drop(event)" ondragover="allowDrop(event)"></span>    </td>
                <td align="center">  <span class="luecke1s" id="lueckeN3s" ondrop="drop(event)" ondragover="allowDrop(event)"></span>    </td>
                <td align="center">  <span class="luecke" id="lueckeN3p" ondrop="drop(event)" ondragover="allowDrop(event)"></span>    </td>

            </tr>

            <tr>
                <td align="center"> O </td>
                <td align="center">  <span class="luecke" id="lueckeO" ondrop="drop(event)" ondragover="allowDrop(event)">Hochzahl O</span>    </td>
                <td align="center">  <span class="luecke1s" id="lueckeO1s2" ondrop="drop(event)" ondragover="allowDrop(event)"> &uarr;&darr;</span>      </td>
                <td align="center">  <span class="luecke1s" id="lueckeO2s1" ondrop="drop(event)" ondragover="allowDrop(event)">&uarr;&darr;</span>    </td>
                <td align="center">  <span class="luecke" id="lueckeO2p" ondrop="drop(event)" ondragover="allowDrop(event)"></span>    </td>
                <td align="center">  <span class="luecke1s" id="lueckeO3s" ondrop="drop(event)" ondragover="allowDrop(event)"></span>    </td>
                <td align="center">  <span class="luecke" id="lueckeO3p" ondrop="drop(event)" ondragover="allowDrop(event)"></span>    </td>

            </tr>


            <tr>
                <td align="center">   F </td>
                <td align="center">  <span class="luecke" id="lueckeF" ondrop="drop(event)" ondragover="allowDrop(event)">Hochzahl F</span>    </td>
                <td align="center">  <span class="luecke1s" id="lueckeF1s2" ondrop="drop(event)" ondragover="allowDrop(event)"> &uarr;&darr;</span>      </td>
                <td align="center">  <span class="luecke1s" id="lueckeF2s1" ondrop="drop(event)" ondragover="allowDrop(event)">&uarr;&darr;</span>    </td>
                <td align="center">  <span class="luecke" id="lueckeF2p" ondrop="drop(event)" ondragover="allowDrop(event)"></span>    </td>
                <td align="center">  <span class="luecke1s" id="lueckeF3s" ondrop="drop(event)" ondragover="allowDrop(event)"> </span>    </td>
                <td align="center">  <span class="luecke" id="lueckeF3p" ondrop="drop(event)" ondragover="allowDrop(event)"></span>    </td>

            </tr>

            <tr>
                <td align="center"> Ne </td>
                <td align="center">  <span class="luecke" id="lueckeNe" ondrop="drop(event)" ondragover="allowDrop(event)">Hochzahl Ne </span>   </td>
                <td align="center">  <span class="luecke1s" id="lueckeNe1s2" ondrop="drop(event)" ondragover="allowDrop(event)"> &uarr;&darr;</span>      </td>
                <td align="center">  <span class="luecke1s" id="lueckeNe2s1" ondrop="drop(event)" ondragover="allowDrop(event)">&uarr;&darr;</span>    </td>
                <td align="center">  <span class="luecke" id="lueckeNe2p" ondrop="drop(event)" ondragover="allowDrop(event)"></span>    </td>
                <td align="center">  <span class="luecke1s" id="lueckeNe3s" ondrop="drop(event)" ondragover="allowDrop(event)"> </span>    </td>
                <td align="center">  <span class="luecke" id="lueckeNe3p" ondrop="drop(event)" ondragover="allowDrop(event)"></span>    </td>

            </tr>


            <tr>
                <td align="center">  Na   </td>
                <td align="center">  <span class="luecke" id="lueckeNa" ondrop="drop(event)" ondragover="allowDrop(event)">Hochzahl Na</span>    </td>
                <td align="center">  <span class="luecke1s" id="lueckeNa1s2" ondrop="drop(event)" ondragover="allowDrop(event)"> &uarr;&darr;</span>      </td>
                <td align="center">  <span class="luecke1s" id="lueckeNa2s1" ondrop="drop(event)" ondragover="allowDrop(event)">&uarr;&darr;</span>    </td>
                <td align="center">  <span class="luecke" id="lueckeNa2p" ondrop="drop(event)" ondragover="allowDrop(event)"></span>    </td>
                <td align="center">  <span class="luecke1s" id="lueckeNa3s" ondrop="drop(event)" ondragover="allowDrop(event)"> </span>    </td>
                <td align="center">  <span class="luecke" id="lueckeNa3p" ondrop="drop(event)" ondragover="allowDrop(event)"></span>    </td>

            </tr>

            <tr>
                <td align="center">   Mg  </td>
                <td align="center">  <span class="luecke" id="lueckeMg" ondrop="drop(event)" ondragover="allowDrop(event)">Hochzahl Mg </span>  </td>
                <td align="center">  <span class="luecke1s" id="lueckeMg1s2" ondrop="drop(event)" ondragover="allowDrop(event)"> &uarr;&darr;</span>      </td>
                <td align="center">  <span class="luecke1s" id="lueckeMg1s1" ondrop="drop(event)" ondragover="allowDrop(event)">&uarr;&darr;</span>    </td>
                <td align="center">  <span class="luecke" id="lueckeMg2p1" ondrop="drop(event)" ondragover="allowDrop(event)">&uarr;&darr; &uarr;&darr; &uarr;&darr;</span>    </td>
                <td align="center">  <span class="luecke1s" id="lueckeMg3s" ondrop="drop(event)" ondragover="allowDrop(event)"> </span>    </td>
                <td align="center">  <span class="luecke" id="lueckeMg3p" ondrop="drop(event)" ondragover="allowDrop(event)"></span>    </td>


            </tr>

            <tr>
                <td align="center">   P   </td>
                <td align="center">  <span class="luecke" id="lueckeP" ondrop="drop(event)" ondragover="allowDrop(event)">Hochzahl P</span>    </td>
                <td align="center">  <span class="luecke1s" id="lueckeP1s2" ondrop="drop(event)" ondragover="allowDrop(event)"> &uarr;&darr;</span>      </td>
                <td align="center">  <span class="luecke1s" id="lueckeP2s1" ondrop="drop(event)" ondragover="allowDrop(event)">&uarr;&darr;</span>    </td>
                <td align="center">  <span class="luecke" id="lueckeP2p1" ondrop="drop(event)" ondragover="allowDrop(event)">&uarr;&darr; &uarr;&darr; &uarr;&darr;</span>    </td>
                <td align="center">  <span class="luecke1s" id="lueckeP3s" ondrop="drop(event)" ondragover="allowDrop(event)"> </span>    </td>
                <td align="center">  <span class="luecke" id="lueckeP3p" ondrop="drop(event)" ondragover="allowDrop(event)"></span>    </td>

            </tr>

            <tr>
                <td align="center">  S    </td>
                <td align="center">  <span class="luecke" id="lueckeS" ondrop="drop(event)" ondragover="allowDrop(event)">Hochzahl S </span>   </td>
                <td align="center">  <span class="luecke1s" id="lueckeS1s2" ondrop="drop(event)" ondragover="allowDrop(event)"> &uarr;&darr;</span>      </td>
                <td align="center">  <span class="luecke1s" id="lueckeS2s1" ondrop="drop(event)" ondragover="allowDrop(event)">&uarr;&darr;</span>    </td>
                <td align="center">  <span class="luecke" id="lueckeS2p1" ondrop="drop(event)" ondragover="allowDrop(event)">&uarr;&darr; &uarr;&darr; &uarr;&darr;</span>    </td>
                <td align="center">  <span class="luecke1s" id="lueckeS3s" ondrop="drop(event)" ondragover="allowDrop(event)"></span>    </td>
                <td align="center">  <span class="luecke" id="lueckeS3p" ondrop="drop(event)" ondragover="allowDrop(event)"></span>    </td>

            </tr>

            <tr>
                <td align="center">  Cl  </td>
                <td align="center">  <span class="luecke" id="lueckeCl" ondrop="drop(event)" ondragover="allowDrop(event)">Hochzahl Cl </span>    </td>
                <td align="center">  <span class="luecke1s" id="lueckeCl1s2" ondrop="drop(event)" ondragover="allowDrop(event)"> &uarr;&darr;</span>      </td>
                <td align="center">  <span class="luecke1s" id="lueckeCl2s1" ondrop="drop(event)" ondragover="allowDrop(event)">&uarr;&darr;</span>    </td>
                <td align="center">  <span class="luecke" id="lueckeCl2p1" ondrop="drop(event)" ondragover="allowDrop(event)">&uarr;&darr; &uarr;&darr; &uarr;&darr;</span>    </td>
                <td align="center">  <span class="luecke1s" id="lueckeCl3s" ondrop="drop(event)" ondragover="allowDrop(event)"> </span>    </td>
                <td align="center">  <span class="luecke" id="lueckeCl3p" ondrop="drop(event)" ondragover="allowDrop(event)"></span>    </td>

            </tr>

            <tr>
                <td align="center">  Ar   </td>
                <td align="center">  <span class="luecke" id="lueckeAr" ondrop="drop(event)" ondragover="allowDrop(event)">Hochzahl Ar</span>    </td>
                <td align="center">  <span class="luecke1s" id="lueckeAr1s2" ondrop="drop(event)" ondragover="allowDrop(event)"> &uarr;&darr;</span>      </td>
                <td align="center">  <span class="luecke1s" id="lueckeAr2s1" ondrop="drop(event)" ondragover="allowDrop(event)">&uarr;&darr;</span>    </td>
                <td align="center">  <span class="luecke" id="lueckeAr2p1" ondrop="drop(event)" ondragover="allowDrop(event)">&uarr;&darr; &uarr;&darr; &uarr;&darr;</span>    </td>
                <td align="center">  <span class="luecke1s" id="lueckeAr3s" ondrop="drop(event)" ondragover="allowDrop(event)"> </span>    </td>
                <td align="center">  <span class="luecke" id="lueckeAr3p" ondrop="drop(event)" ondragover="allowDrop(event)"></span>    </td>

            </tr>
         
            <tr>
                <td align=center colspan="7">
                
                    <button onclick="location.reload()">Seite neu laden</button>
                   
                    <button onclick="openQRCode()">QR-Code anzeigen</button>
                </td>
            </tr>


        </table>
     
    </div>

    <script>

        // ========================================
        // ✅ Kompatibles Drag & Drop für Desktop + iPad (Safari)
        // ========================================

        // Globale Variable für Touch-Unterstützung
        let touchDragEl = null;

        // --------- Standard Desktop Drag & Drop ---------
        function allowDrop(ev) {
            ev.preventDefault();
        }

        function drag(ev) {
            ev.dataTransfer?.setData("text", ev.target.id);
            touchDragEl = ev.target; // Fallback für Touch
        }

        function drop(ev) {
            ev.preventDefault();

            // 🔹 draggedEl ermitteln (Desktop oder Touch)
            const draggedId = ev.dataTransfer ? ev.dataTransfer.getData("text") : touchDragEl?.id;
            const draggedEl = document.getElementById(draggedId);
            if (!draggedEl) return;




            // 🔹 Ziel bestimmen: darf .luecke oder .luecke1s sein
            let target = ev.target;
            if (!target.classList.contains("luecke") && !target.classList.contains("luecke1s")) {
                target = target.closest(".luecke, .luecke1s");
            }
            if (!target) return;




            // 🔹 Immer überschreibbar: alten Inhalt entfernen
            target.innerHTML = "";

            // 🔹 Klon erzeugen (Original bleibt im Speicher)
            const clone = draggedEl.cloneNode(true);
            clone.id = draggedEl.id + "_clone_" + Date.now();
            clone.draggable = false;

            target.appendChild(clone);

            // 🔹 Farben zurücksetzen
            target.classList.remove("richtig", "falsch");

            // 🔹 Prüfung
            const isCorrect = checkMatch(target, draggedEl);
            target.classList.add(isCorrect ? "richtig" : "falsch");
        }

        // --------- Touch-Unterstützung für iPad Safari ---------
        // Da iOS Safari kein echtes HTML5 Drag & Drop kennt,
        // simulieren wir Drag mit Touch-Events.
        function enableTouchDragAndDrop() {
            const words = document.querySelectorAll(".wort, .wort2, .wortp, .wortd");
            const dropzones = document.querySelectorAll(".luecke, .luecke1s");

            words.forEach(word => {
                word.addEventListener("touchstart", e => {
                    touchDragEl = word;
                    word.classList.add("dragging");
                });

                word.addEventListener("touchend", e => {
                    word.classList.remove("dragging");
                    touchDragEl = null;
                });
            });

            dropzones.forEach(zone => {
                zone.addEventListener("touchmove", e => e.preventDefault(), { passive: false });
                zone.addEventListener("touchend", e => {
                    if (touchDragEl) {
                        // Manuell drop() auslösen
                        const fakeEvent = { preventDefault: () => { }, target: zone };
                        drop(fakeEvent);
                    }
                });
            });
        }

        // --------- Zuordnungen prüfen ---------
        function checkMatch(target, draggedEl) {
            const pairs = [

                //            Hochzahl                  1s                  2s                                 2p                          3s                       3p
                ["lueckeBe", ["wortBe"]], ["lueckeBe1s2", ["wort1s2"]], ["lueckeBe2s2", ["wort1s2"]], ["lueckeBe2p", ["wortleer"]], ["lueckeBe3s", ["wortleer"]], ["lueckeBe3p", ["wortleer"]],
                ["lueckeB", ["wortB"]], ["lueckeB1s2", ["wort1s2"]], ["lueckeB2s2", ["wort1s2"]], ["lueckeB2p", ["wort2p1"]], ["lueckeB3s", ["wortleer"]], ["lueckeB3p", ["wortleer"]],
                ["lueckeC", ["wortC"]], ["lueckeC1s2", ["wort1s2"]], ["lueckeC2s2", ["wort1s2"]], ["lueckeC2p", ["wort2p2"]], ["lueckeC3s", ["wortleer"]], ["lueckeC3p", ["wortleer"]],
                ["lueckeN", ["wortN"]], ["lueckeN1s2", ["wort1s2"]], ["lueckeN2s2", ["wort1s2"]], ["lueckeN2p", ["wort2p3"]], ["lueckeN3s", ["wortleer"]], ["lueckeN3p", ["wortleer"]],

                ["lueckeO", ["wortO"]], ["lueckeO2p", ["wort2p4"]], ["lueckeO3s", ["wortleer"]], ["lueckeO3p", ["wortleer"]],
                ["lueckeF", ["wortF"]], ["lueckeF2p", ["wort2p5"]], ["lueckeF3s", ["wortleer"]], ["lueckeF3p", ["wortleer"]],
                ["lueckeNe", ["wortNe"]], ["lueckeNe2p", ["wort2p6"]], ["lueckeNe3s", ["wortleer"]], ["lueckeNe3p", ["wortleer"]],
                ["lueckeNa", ["wortNa"]], ["lueckeNa2p", ["wort2p6"]], ["lueckeNa3s", ["wort1s1"]], ["lueckeNa3p", ["wortleer"]],
                ["lueckeMg", ["wortMg"]], ["lueckeMg3s", ["wort1s2"]], ["lueckeMg3p", ["wortleer"]],
                ["lueckeP", ["wortP"]], ["lueckeP3s", ["wort1s2"]], ["lueckeP3p", ["wort2p3"]],
                ["lueckeS", ["wortS"]], ["lueckeS3s", ["wort1s2"]], ["lueckeS3p", ["wort2p4"]],
                ["lueckeCl", ["wortCl"]], ["lueckeCl3s", ["wort1s2"]], ["lueckeCl3p", ["wort2p5"]],
                ["lueckeAr", ["wortAr"]], ["lueckeAr3s", ["wort1s2"]], ["lueckeAr3p", ["wort2p6"]],

            ];

            const correctPairs = Object.fromEntries(pairs);
            const allowed = correctPairs[target.id];
            return allowed && allowed.includes(draggedEl.id);
        }

        // --------- Initialisierung ---------
        document.addEventListener("DOMContentLoaded", enableTouchDragAndDrop);

    </script>

    <script>
        function openQRCode() {
            const currentUrl = window.location.href;
            const qrWin = window.open("", "_blank", "width=520,height=600,resizable=yes,scrollbars=no");

            qrWin.document.write(`
          <html lang="de">
          <head>
            <meta charset="UTF-8">
            <title>QR-Code</title>
            <style>
              body {
                font-family: Arial, sans-serif;
                text-align: center;
                background: #fff;
                padding: 30px;
              }
              #qrcode { margin-top: 40px; }
              button {
                margin-top: 40px;
                background: #0071e3;
                color: #fff;
                border: none;
                border-radius: 10px;
                font-size: 16px;
                padding: 10px 20px;
                cursor: pointer;
              }
              button:hover { background: #005bb5; }
            </style>
          </head>
          <body>
            <h2>QR-Code zu dieser Seite</h2>
            <div id="qrcode"></div>
            <button onclick="window.close()">Fenster schließen</button>
            <script src="libs/qrcode.min.js"><\/script>
            <script>
              window.addEventListener('load', function() {
                new QRCode(document.getElementById("qrcode"), {
                  text: "${currentUrl}",
                  width: 220,
                  height: 220,
                  correctLevel: QRCode.CorrectLevel.H
                });
              });
            <\/script>
          </body>
          </html>
        `);

            qrWin.document.close();
        }
    </script>

</body>
</html>
