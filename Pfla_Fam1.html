<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8 ">
    <!--  <meta name="viewport" content="width=device-width, initial-scale=1.0">  -->
    <!-- /*Zoom*/-->
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, minimum-scale=0.5, maximum-scale=3.0, user-scalable=yes">

    <title>Pflanzenfamilien Drag & Drop</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "San Francisco", Arial, sans-serif;
            background: #F6F8E2;
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 0;
            padding: 20px;
        }

        h1 {
            color: #333;
            font-weight: 600;
        }

        .container {
            width: 80%;
            background: #EEE8AA;
            /*  height: 700px; */
            display: inline-flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
            align-content: center;
        }

        .bldserie {
            background: white;
            /*flex-direction: row;    */



            padding: 15px;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            width: 230px; /*breite der weißen Fläche um bilder*/
        }

        .dropzone {
            width: 150px;
            height: 100px;
            border: 2px dashed #ccc;
            border-radius: 10px;
            margin: 5px auto;
            /* flex-direction: row; */



            justify-content: center;
            align-items: center;
            background: #fafafa;
        }

        .image {
            width: 100px;
            height: auto;
            /* flex-direction: row; */


            cursor: grab;
            border-radius: 8px;
            transition: transform 0.2s ease;
        }

            .image:active {
                transform: scale(1.05);
            }

        .btn {
            background: #007aff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            margin-top: 20px;
            transition: background 0.2s;
        }

            .btn:hover {
                background: #005ecb;
            }

        .correct {
            background: #34c759 !important;
        }

        .incorrect {
            background: #ff3b30 !important;
        }

        #images-container {
            display: inline-flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 20px;
            max-width: 90%;
        }
    </style>
</head>
<body>

    <div class="container">

        <table>
            <tr>
                <td colspan="1">
                    <h1> Pflanzenfamilien</h1> <h2>Ordne die Bilder richtig zu. Ziehe dazu die Bilder hierher:</h2>
                    <button class="btn" onclick="checkResults()">Auswerten</button>
                    <button class="btn" onclick="location.reload()">Seite neu laden</button>
                    <button class="btn" onclick="openQRCode()">QR-Code anzeigen</button>

                </td>
            </tr>

            <tr>

                <td>

                    <div class="container">

                        <div class="bldserie" data-bldserie="x">
                            <h3>Pflanzenfamilie </h3>
                            <div class="dropzone" data-position="x"><h3> Blüte </h3></div>
                            <div class="dropzone" data-position="2"><h3>Blütendiagramm  </h3></div>
                            <div class="dropzone" data-position="3"><h3>Blütenformel  </h3></div>
                            <div class="dropzone" data-position="4"><h3>Fruchtform  </h3></div>
                            <div class="dropzone" data-position="5"><h3>Vertreter  </h3></div>
                        </div>

                        <div class="bldserie" data-bldserie="1">
                            <h3>Kreuzblütengewächse </h3>
                            <div class="dropzone" data-position="1"></div>
                            <div class="dropzone" data-position="2"></div>
                            <div class="dropzone" data-position="3"></div>
                            <div class="dropzone" data-position="4"></div>
                            <div class="dropzone" data-position="5"></div>
                        </div>

                        <!-- Bilderserie 2 -->
                        <div class="bldserie" data-bldserie="2">
                            <h3>Rosengewächse </h3>
                            <div class="dropzone" data-position="1"></div>
                            <div class="dropzone" data-position="2"></div>
                            <div class="dropzone" data-position="3"></div>
                            <div class="dropzone" data-position="4"></div>
                            <div class="dropzone" data-position="5"></div>
                        </div>


                        <!-- Bilderserie 3 -->
                        <div class="bldserie" data-bldserie="3">
                            <h3>Lippenblütengewächse </h3>
                            <div class="dropzone" data-position="1"></div>
                            <div class="dropzone" data-position="2"></div>
                            <div class="dropzone" data-position="3"></div>
                            <div class="dropzone" data-position="4"></div>
                            <div class="dropzone" data-position="5"></div>
                        </div>




                        <div class="bldserie" data-bldserie="4">
                            <h3>Schmetterlingsblütler </h3>
                            <div class="dropzone" data-position="1"></div>
                            <div class="dropzone" data-position="2"></div>
                            <div class="dropzone" data-position="3"></div>
                            <div class="dropzone" data-position="4"></div>
                            <div class="dropzone" data-position="5"></div>
                        </div>

                        <div class="bldserie" data-bldserie="5">
                            <h3>Korbblütengewächse </h3>
                            <div class="dropzone" data-position="1"></div>
                            <div class="dropzone" data-position="2"></div>
                            <div class="dropzone" data-position="3"></div>
                            <div class="dropzone" data-position="4"></div>
                            <div class="dropzone" data-position="5"></div>
                        </div>

                        <div class="bldserie" data-bldserie="6">
                            <h3> Liliengewächse </h3>
                            <div class="dropzone" data-position="1"></div>
                            <div class="dropzone" data-position="2"></div>
                            <div class="dropzone" data-position="3"></div>
                            <div class="dropzone" data-position="4"></div>
                            <div class="dropzone" data-position="5"></div>
                        </div>

                    </div>

                </td>
            </tr>





            <!--

            <tr>

                <td>

                    <textarea>

            https://www.gida.de/testcenter/biologie/bio-dvd036/aufgabe_02.htm
            https://www.gida.de/testcenter/biologie/#36
            https://www.digitalefolien.de/biologie/pflanzen/aufbau/frucht.html
            Lippis: K5 C5-0 A5+5 G5-4 Spaltfrucht/KLausen, Basilikum, Minze, Rosmarin, Thymian, Salbei, Lavendel
            Kruzer: K2+2 C4 A2+4 G4   Schote Ackersenf,Brokkoli, Blumenkohl, Weißkohl, Raps, Kohl, Senf, Rettich, Kresse, Hirtentäschel
            Schmmetter : K4 C4 A2+4 G2 Hülse  Erbsen, Bohnen, Linsen, Klee
            Doldis: K5 C5 A5 G (2) Spaltfrucht/Doppelachäne Dill, Fenchel, Koriander, Kümmel, Liebstöckel, Petersilie, Karotte, Selleie
            Korbis: (↓)K(∞) [C(5)A(5)] G(2) Nuss (Achäne) Sonnenblume, Gänseblümchen, Margerite, Kamille
            Liliengewächse:: P3+3 A3+3 G(3)  Kapsel  Tulpe,Lilie, Gelbstern, Kaiserkrone, Traubenhyazinthe
            Rosen:K5 C5 A∞ G1-∞    Kernfrucht Balgfrüchte, Nüsschen, Sch(t)einfrüchte, Steinfrüchte
             Weißdorn, Äpfel, Birnen, Kirschen, Pflaumen, Erdbeeren, Himbeeren, Brombeeren
            </textarea>
                </td>
            </tr>
             -->



            <tr>
                <td align="center">
                    <div id="images-container">
                        <!-- Zuf�llig sortierte Bilder werden hier eingef�gt -->
                    </div>
                    <!--   <button class="btn" onclick="checkResults()">Auswerten</button>-->
                </td>
            </tr>


        </table>


    </div>

    <script>
        const imagesContainer = document.getElementById("images-container");
        let imagesArray = [];

        // Bilder in Array speichern ; Anzahl Bildserien; je 5 Bilder
        for (let bldserie = 1; bldserie <= 7; bldserie++) {
            for (let i = 1; i <= 5; i++) {
                imagesArray.push({
                    src: `./images/Bldserie/bldserie${bldserie}_${i}.jpg`,
                    bldserie: bldserie,
                    position: i
                });
            }
        }

        // Funktion zum Zufallsmischen des Arrays (Fisher-Yates-Algorithmus)
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        // Bilder mischen
        shuffleArray(imagesArray);

        // Zuf�llige Bilder auf der Seite anzeigen
        imagesArray.forEach(image => {
            let img = document.createElement("img");
            img.src = image.src;
            img.classList.add("image");
            img.draggable = true;
            img.dataset.bldserie = image.bldserie;
            img.dataset.position = image.position;
            img.addEventListener("dragstart", dragStart);
            imagesContainer.appendChild(img);
        });

        // Drag & Drop Events
        function dragStart(event) {
            event.dataTransfer.setData("text/plain", JSON.stringify({
                bldserie: event.target.dataset.bldserie,
                position: event.target.dataset.position
            }));
        }

        document.querySelectorAll(".dropzone").forEach(zone => {
            zone.addEventListener("dragover", event => event.preventDefault());

            zone.addEventListener("drop", event => {
                event.preventDefault();
                const data = JSON.parse(event.dataTransfer.getData("text/plain"));

                // Nur ein Bild pro Dropzone erlauben
                if (zone.children.length > 0) return;

                let img = document.createElement("img");
                img.src = `images/Bldserie/bldserie${data.bldserie}_${data.position}.jpg`;
                img.classList.add("image");
                img.dataset.bldserie = data.bldserie;
                img.dataset.position = data.position;
                zone.appendChild(img);
            });
        });

        function checkResults() {
            document.querySelectorAll(".dropzone").forEach(zone => {
                if (zone.children.length > 0) {
                    const img = zone.children[0];
                    const correctSerie = zone.parentElement.dataset.bldserie;
                    const correctPosition = zone.dataset.position;

                    if (img.dataset.bldserie === correctSerie && img.dataset.position === correctPosition) {
                        zone.classList.add("correct");
                    } else {
                        zone.classList.add("incorrect");
                    }
                }
            });
        }
    </script>


    <script>
        function openQRCode() {
            const currentUrl = window.location.href;
            const qrWin = window.open("", "_blank", "width=520,height=600,resizable=yes,scrollbars=no");

            qrWin.document.write(`
               <html lang="de">
               <head>
                 <meta charset="UTF-8">
                 <title>QR-Code</title>
                 <style>
                   body {
                     font-family: Arial, sans-serif;
                     text-align: center;
                     background: #fff;
                     padding: 30px;
                   }
                   #qrcode { margin-top: 40px; }
                   button {
                     margin-top: 40px;
                     background: #0071e3;
                     color: #fff;
                     border: none;
                     border-radius: 10px;
                     font-size: 16px;
                     padding: 10px 20px;
                     cursor: pointer;
                   }
                   button:hover { background: #005bb5; }
                 </style>
               </head>
               <body>
                 <h2>QR-Code zu dieser Seite</h2>
                 <div id="qrcode"></div>
                 <button onclick="window.close()">Fenster schlieÃŸen</button>
                 <script src="libs/qrcode.min.js"><\/script>
                 <script>
                   window.addEventListener('load', function() {
                     new QRCode(document.getElementById("qrcode"), {
                       text: "${currentUrl}",
                       width: 220,
                       height: 220,
                       correctLevel: QRCode.CorrectLevel.H
                     });
                   });
                 <\/script>
               </body>
               </html>
             `);

            qrWin.document.close();
        }
    </script>



</body>
</html>