<!DOCTYPE html>
<html lang="de">
<head>

    <meta charset="UTF-8">
    <!--  <meta name="viewport" content="width=device-width, initial-scale=1.0">  -->
    <!-- /*Zoom*/-->
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, minimum-scale=0.5, maximum-scale=3.0, user-scalable=yes">
    <title>Mitose Ablauf</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "San Francisco", Arial, sans-serif;
            background: #F6F8E2;
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 0;
            padding: 20px;
        }

        h1 {
            color: #333;
            font-weight: 600;
        }

        .container {
            width: 900px;
            background: #EEE8AA;
            /*  height: 700px; */
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
        }

        .serie {
            background: white;
            /*flex-direction: row;    */



            padding: 15px;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            width: 180px;
        }

        .dropzone {
            width: 150px;
            height: 100px;
            border: 2px dashed #ccc;
            border-radius: 10px;
            margin: 5px auto;
            /* flex-direction: row; */



            justify-content: center;
            align-items: center;
            background: #fafafa;
        }

        .image {
            width: 100px;
            height: auto;
            /* flex-direction: row; */


            cursor: grab;
            border-radius: 8px;
            transition: transform 0.2s ease;
        }

            .image:active {
                transform: scale(1.05);
            }

        .btn {
            background: #007aff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            margin-top: 20px;
            transition: background 0.2s;
        }

            .btn:hover {
                background: #005ecb;
            }

        .correct {
            background: #34c759 !important;
        }

        .incorrect {
            background: #ff3b30 !important;
        }

        #images-container {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 20px;
        }
    </style>
</head>
<body>



    <div class="container">


        <table>

            <tr>
                <td>
                    <h2 style="color:#731768">Ablauf der Mitose</h2>
                    Bringen Sie die Bilder in die richtige Reihenfolge.
                    Ziehen Sie die Bilder per Drag & Drop in die richtige Stelle und klicken Sie auf „Auswerten“.
                </td>
            </tr>


            <tr>

                <td>

                    <div class="container">
                        <div class="serie" data-serie="1">
                            <h3>Schemazeichnung</h3>
                            <div class="dropzone" data-position="1"></div>
                            <div class="dropzone" data-position="2"></div>
                            <div class="dropzone" data-position="3"></div>
                            <div class="dropzone" data-position="4"></div>
                            <div class="dropzone" data-position="5"></div>
                        </div>

                        <!-- Bilderserie 2 -->
                        <div class="serie" data-serie="2">
                            <h3>Elektronenmikroskop</h3>
                            <div class="dropzone" data-position="1"></div>
                            <div class="dropzone" data-position="2"></div>
                            <div class="dropzone" data-position="3"></div>
                            <div class="dropzone" data-position="4"></div>
                            <div class="dropzone" data-position="5"></div>
                        </div>

                        <!-- Bilderserie 3 -->
                        <div class="serie" data-serie="3">
                            <h3>Fotografie</h3>
                            <div class="dropzone" data-position="1"></div>
                            <div class="dropzone" data-position="2"></div>
                            <div class="dropzone" data-position="3"></div>
                            <div class="dropzone" data-position="4"></div>
                            <div class="dropzone" data-position="5"></div>
                        </div>
                    </div>

                </td>
            </tr>

            <tr>
                <td bgcolor=#F0E68C>
                    <div id="images-container">
                        <!-- Zuf�llig sortierte Bilder werden hier eingef�gt -->
                    </div>
                    <!--   <button class="btn" onclick="checkResults()">Auswerten</button>-->
                </td>
            </tr>

            <tr bgcolor=#AFDAB9>
                <td>
                    <div id="images-container">
                        <!-- Zuf�llig sortierte Bilder werden hier eingef�gt -->
                    </div>

                    <button class="btn" onclick="checkResults()">Auswerten</button>
                    <button class="btn" onclick="location.reload()">Seite neu laden</button>
                    <button class="btn" onclick="openQRCode()">QR-Code anzeigen</button>
                </td>
            </tr>


        </table>

    </div>
    <script>
        const imagesContainer = document.getElementById("images-container");
        let imagesArray = [];

        // Bilder in Array speichern
        for (let serie = 1; serie <= 3; serie++) {
            for (let i = 1; i <= 5; i++) {
                imagesArray.push({
                    src: `images/serie${serie}_${i}.jpg`,
                    serie: serie,
                    position: i
                });
            }
        }

        // Funktion zum Zufallsmischen des Arrays (Fisher-Yates-Algorithmus)
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        // Bilder mischen
        shuffleArray(imagesArray);

        // Zuf�llige Bilder auf der Seite anzeigen
        imagesArray.forEach(image => {
            let img = document.createElement("img");
            img.src = image.src;
            img.classList.add("image");
            img.draggable = true;
            img.dataset.serie = image.serie;
            img.dataset.position = image.position;
            img.addEventListener("dragstart", dragStart);
            imagesContainer.appendChild(img);
        });

        // Drag & Drop Events
        function dragStart(event) {
            event.dataTransfer.setData("text/plain", JSON.stringify({
                serie: event.target.dataset.serie,
                position: event.target.dataset.position
            }));
        }

        document.querySelectorAll(".dropzone").forEach(zone => {
            zone.addEventListener("dragover", event => event.preventDefault());

            zone.addEventListener("drop", event => {
                event.preventDefault();
                const data = JSON.parse(event.dataTransfer.getData("text/plain"));

                // Nur ein Bild pro Dropzone erlauben
                if (zone.children.length > 0) return;

                let img = document.createElement("img");
                img.src = `images/serie${data.serie}_${data.position}.jpg`;
                img.classList.add("image");
                img.dataset.serie = data.serie;
                img.dataset.position = data.position;
                zone.appendChild(img);
            });
        });

        function checkResults() {
            document.querySelectorAll(".dropzone").forEach(zone => {
                if (zone.children.length > 0) {
                    const img = zone.children[0];
                    const correctSerie = zone.parentElement.dataset.serie;
                    const correctPosition = zone.dataset.position;

                    if (img.dataset.serie === correctSerie && img.dataset.position === correctPosition) {
                        zone.classList.add("correct");
                    } else {
                        zone.classList.add("incorrect");
                    }
                }
            });
        }
    </script>

    <script>
        function openQRCode() {
            const currentUrl = window.location.href;
            const qrWin = window.open("", "_blank", "width=520,height=600,resizable=yes,scrollbars=no");

            qrWin.document.write(`
            <html lang="de">
            <head>
              <meta charset="UTF-8">
              <title>QR-Code</title>
              <style>
                body {
                  font-family: Arial, sans-serif;
                  text-align: center;
                  background: #fff;
                  padding: 30px;
                }
                #qrcode { margin-top: 40px; }
                button {
                  margin-top: 40px;
                  background: #0071e3;
                  color: #fff;
                  border: none;
                  border-radius: 10px;
                  font-size: 16px;
                  padding: 10px 20px;
                  cursor: pointer;
                }
                button:hover { background: #005bb5; }
              </style>
            </head>
            <body>
              <h2>QR-Code zu dieser Seite</h2>
              <div id="qrcode"></div>
              <button onclick="window.close()">Fenster schließen</button>
              <script src="libs/qrcode.min.js"><\/script>
              <script>
                window.addEventListener('load', function() {
                  new QRCode(document.getElementById("qrcode"), {
                    text: "${currentUrl}",
                    width: 220,
                    height: 220,
                    correctLevel: QRCode.CorrectLevel.H
                  });
                });
              <\/script>
            </body>
            </html>
          `);

            qrWin.document.close();
        }
    </script>



</body>
</html>