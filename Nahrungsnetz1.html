
<!DOCTYPE html>
<html lang="de">
<head>

    <meta charset="UTF-8">
    <!--  <meta name="viewport" content="width=device-width, initial-scale=1.0">  -->
    <!-- /*Zoom*/-->
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, minimum-scale=0.5, maximum-scale=3.0, user-scalable=yes">
    <title>Nahrungsnetz1</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background-color: #F6F8E2;
            color: #333;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }

        .container {
            max-width: 800px;
            max-height: 1300px;
            /* max-width: 900px; */
            background-color: #F6F8E9;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        #explanation {
            width: 90%;
            padding: 10px;
            border-radius: 12px;
            border: 1px solid #ccc;
            margin: 10px 0 20px;
            resize: none;
            font-size: 14px;
        }

        button {
            padding: 12px 14px;
            margin-top: 10px;
            border: none;
            border-radius: 12px;
            background-color: #0071e3;
            color: white;
            font-size: 16px;
            cursor: pointer;
            transition: background-color 0.3s ease, box-shadow 0.3s ease;
        }

            button:hover {
                background-color: #005bb5;
                box-shadow: 0 6px 18px rgba(0, 0, 0, 0.1);
            }

        p#ergebnis {
            margin-top: 20px;
            font-size: 18px;
            font-weight: 500;
        }


        h1 {
            font-size: 24px;
            color: #731768;
        }


        .cat-image {
            position: relative; /* relative */
            width: auto;
            margin: auto; /* 50px */
        }

            .cat-image img {
                width: 100%;
                border-radius: 12px;
            }


        .label {
            position: absolute; /*  relative*/
            background-color: rgba(255, 255, 255, 0.7);
            border-radius: 8px;
            padding: 8px;
            font-weight: bold;
            cursor: pointer;
            width: 120px; /*feldbreite zum Reinschieben*/
        }


        .wordlist {
            display: flex;
            justify-content: space-around;
            /* margin-top: -20px; */
            flex-wrap: wrap;
        }

            .wordlist span {
                padding: 10px 15px;
                background-color: #007aff;
                color: white;
                border-radius: 25px;
                cursor: pointer;
                user-select: none;
                font-size: 16px;
                margin: 5px;
            }

                .wordlist span.dragging {
                    opacity: 0.5;
                }

                .wordlist span.over {
                    background-color: #34c759;
                }


                .wordlist span:hover {
                    background-color: #5888f2;
                    box-shadow: 0 6px 18px rgba(0, 0, 0, 0.1);
                }


        .feedback {
            margin-top: 30px;
            font-size: 18px;
            font-weight: bold;
        }

        .result {
            font-size: 20px;
            color: green;
        }

        .error {
            font-size: 20px;
            color: red;
        }

        .completed {
            background-color: #d1ffd6;
        }
    </style>
</head>
<body>

    <div class="container">
        <h1>Nahrungsnetze"</h1>
        <h3>Ziehe die Organismen auf die richtige Position</h3>

        <div class="cat-image">
            <img src="./Pics/Nahrungsnetz_1.png" align="middle" alt="Katze" id="catImage">
        </div>

        <div class="cat-image">

            <div class="label" id="label-Nuss" style="top:  -70px; left: 5px;">(a)</div>
            <div class="label" id="label-Rotelmaus" style="top:  -310px; left: 330px;">(b)</div>
            <div class="label" id="label-Mauswiesel" style="top:  -450px; left: 15px;">(c)</div>
            <div class="label" id="label-Eichhorn" style="top: -70px; left: 640px;">(d)</div>
            <div class="label" id="label-Brombeere" style="top: -70px; left: 330px;">(e)</div>
            <div class="label" id="label-Rotfuchs" style="top: -450px; left: 640px;">(f)</div>
            <div class="label" id="label-Waldkauz" style="top: -500px; left: 330px;">(g)</div>

        </div>

        <div class="wordlist">

            <span draggable="true" class="draggable" id="word-Mauswiesel">Mauswiesel</span>
            <span draggable="true" class="draggable" id="word-Nuss"> Nüsse </span>
            <span draggable="true" class="draggable" id="word-Rotelmaus"> Rötelmaus</span>
            <span draggable="true" class="draggable" id="word-Brombeere"> Brombeere</span>

            <span draggable="true" class="draggable" id="word-Waldkauz">Waldkauz</span>
            <span draggable="true" class="draggable" id="word-Eichhorn"> Eichhörnchen</span>

            <span draggable="true" class="draggable" id="word-Rotfuchs"> Rotfuchs</span>

        </div>
        <div class="feedback">
            <!-- <p id="feedback">Viel Spaß!</p> -->
            <!-- --> <p class="result" id="result"></p>
            <p class="error" id="error"></p>

            <button onclick="location.reload()">Seite neu laden</button>
            <button onclick="openQRCode()">QR-Code anzeigen</button>
        </div>


        <textarea id="explanation" rows="6" placeholder="Hier deine Erklärung eingeben...">
Motto der Nahrungsnetze: Wer wird von wem gefressen.
1. Beschreibe die Folgen,  
            a) wenn die Brombeere gefällt wird
            b) alle Rötelmause von den Räubern gefressen werden 
            c) alle Füchse, Mauswiesel und Waldkauz aus dem Nahrungsnetz verschwinden

</textarea>
    </div>

    <script>
        const draggableItems = document.querySelectorAll('.draggable');
        const labels = document.querySelectorAll('.label');
        const feedback = document.getElementById('feedback');
        const result = document.getElementById('result');
        const error = document.getElementById('error');

        let correctAnswers = 0;
        let totalAnswers = 7; /*Anzahl der Bschriftung */




        // Safari-sicher: globale Standardaktionen verhindern
        window.addEventListener('dragover', e => e.preventDefault());
        window.addEventListener('drop', e => e.preventDefault());

        draggableItems.forEach(item => {
            item.addEventListener('dragstart', (e) => {
                e.dataTransfer.setData('text/plain', e.target.id);
                e.target.classList.add('dragging');
            });

            item.addEventListener('dragend', () => {
                item.classList.remove('dragging');
            });
        });

        labels.forEach(label => {
            label.addEventListener('dragover', (e) => {
                e.preventDefault();
                e.target.classList.add('over');
                e.dataTransfer.dropEffect = 'move';
            });

            label.addEventListener('dragleave', () => {
                label.classList.remove('over');
            });

            label.addEventListener('drop', (e) => {
                e.preventDefault();
                const draggedId = e.dataTransfer.getData('text');
                const draggedElement = document.getElementById(draggedId);
                const targetLabel = e.target;

                if (draggedElement.id === `word-${targetLabel.id.split('-')[1]}`) {
                    targetLabel.textContent = draggedElement.textContent;
                    targetLabel.classList.add('completed');
                    draggedElement.style.visibility = 'hidden';
                    correctAnswers++;

                    if (correctAnswers === totalAnswers) {
                        feedback.textContent = 'Herzlichen Glückwunsch! Alle Antworten sind richtig.';
                        result.textContent = 'Erfolg!';
                        result.style.color = 'green';
                        error.textContent = '';
                    }
                } else {
                    feedback.textContent = 'Leider ist das nicht korrekt. Versuche es noch einmal!';
                    error.textContent = 'Da war was nicht richtig!';
                    result.textContent = 'Schade';
                    result.style.color = 'red';
                }

                label.classList.remove('over');
            });
        });
    </script>

    <script>
        function openQRCode() {
            const currentUrl = window.location.href;
            const qrWin = window.open("", "_blank", "width=520,height=600,resizable=yes,scrollbars=no");

            qrWin.document.write(`
            <html lang="de">
            <head>
              <meta charset="UTF-8">
              <title>QR-Code</title>
              <style>
                body {
                  font-family: Arial, sans-serif;
                  text-align: center;
                  background: #fff;
                  padding: 30px;
                }
                #qrcode { margin-top: 40px; }
                button {
                  margin-top: 40px;
                  background: #0071e3;
                  color: #fff;
                  border: none;
                  border-radius: 10px;
                  font-size: 16px;
                  padding: 10px 20px;
                  cursor: pointer;
                }
                button:hover { background: #005bb5; }
              </style>
            </head>
            <body>
              <h2>QR-Code zu dieser Seite</h2>
              <div id="qrcode"></div>
              <button onclick="window.close()">Fenster schließen</button>
              <script src="libs/qrcode.min.js"><\/script>
              <script>
                window.addEventListener('load', function() {
                  new QRCode(document.getElementById("qrcode"), {
                    text: "${currentUrl}",
                    width: 220,
                    height: 220,
                    correctLevel: QRCode.CorrectLevel.H
                  });
                });
              <\/script>
            </body>
            </html>
          `);

            qrWin.document.close();
        }
    </script>



</body>
</html>


